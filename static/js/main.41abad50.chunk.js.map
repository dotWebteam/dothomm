{"version":3,"sources":["pages/gamePage/components/Board/constants/boardConstants.ts","components/Modal/index.tsx","pages/gamePage/components/Board/utils/initializeUtils.ts","pages/gamePage/components/Board/utils/attackUtils.ts","pages/gamePage/components/Spellbook/spellEffects/MagicArrow/reducer.ts","store/artifactReducers/index.ts","store/artifactReducers/helmOfAlabasterUnicorn.ts","store/artifactReducers/centaursAxe.ts","store/artifactReducers/ringOfVitality.ts","store/artifactReducers/shieldOfDwarwenLords.ts","store/artifactReducers/bootsOfSpeed.ts","pages/gamePage/boardSlice.ts","pages/gamePage/components/Spellbook/spellEffects/index.ts","pictures/cursor/defaultCursor.png","fonts/alagard.ttf","pages/gamePage/components/Board/utils/movingUtils.ts","pictures/clock.png","components/LoadingThrobber/constants.ts","components/LoadingThrobber/index.tsx","components/LoadingThrobber/utils.ts","reportWebVitals.ts","store/userSlice.ts","store/store.ts","index.tsx"],"names":["NUMBERS_OF_BOARD_ROWS","NUMBERS_OF_BOARD_COLUMNS","ADJACENT_COORDINATES","FIRST_PLAYER_POSSIBLE_INITIAL_COORDINATES","x","y","SECOND_PLAYER_POSSIBLE_INITIAL_COORDINATES","rootNode","document","querySelector","StyledBackground","styled","animated","div","defaultCursor","alagardFont","StyledModal","Modal","children","className","onOutsideClick","customBackgroundStyle","customModalStyle","modalStyles","useSpring","to","opacity","marginTop","from","backgroundStyles","createPortal","onClick","e","preventDefault","stopPropagation","style","getInitialBoardState","unitsArray","board","forEach","coordinates","unitType","id","type","map","row","square","random","isEmpty","obstacleType","getInitialBoardAndUnitsState","firstPlayerUnitTemplates","secondPlayerUnitTemplates","firstPlayer","secondPlayer","firstPlayerUnits","UnitTemplate","index","owner","viewDirection","offset","length","secondPlayerUnits","getUnitsForPlayersWithOwnerAndId","firstPlayerPossibleInitialCoordinates","shuffle","firstPlayerUnitsWithCoordinates","unit","pop","Error","secondPlayerPossibleInitialCoordinates","secondPlayerUnitsWithCoordinates","getUnitsWithRandomCoordinates","concat","sort","firstEl","secondEl","actionPoints","max","isActive","getUnitsArrayFromTwoPlayersArraysWithCoordiates","units","getDeadBody","deadBodyType","applyMagicArrowEffect","BoardAndUnitsState","deadUnits","target","targetX","targetY","newUnits","totalHpAfterDmg","healthPoints","count","current","unitCountAfterDmg","Math","ceil","currentHealthAfterDmg","applyDirectDamageToUnits","splice","indexOf","push","newLastAction","lastAction","applyArtifactEffect","artifactName","myName","spellPoints","opponentSpellPoints","helmOfAlabasterUnicornReducer","attack","min","centaursAxeReducer","ringOfVitalityReducer","defense","shieldOfDwarwenLordsReducer","bootsOfSpeedReducer","initialState","opponentName","winner","isOnline","spellStack","isCasting","spellName","undefined","cost","effectSrc","turn","isTired","backgroundSrc","myArtifacts","opponentArtifacts","gameSlice","createSlice","name","reducers","initBoard","state","action","payload","userName","firstPlayerArtifactArr","secondPlayerArtifactArr","artifact","activeUnit","moveToSquare","prevX","prevY","nextX","nextY","unitIndex","findIndex","movingUnit","getHowManyActionPointsToMove","nextTurn","prevActiveUserID","prevUnitIndex","nextActiveUnitArrayPosition","nextActiveUnit","attacker","defender","attackerID","defenderID","attackerUnit","find","defenderUnit","attackPoints","defendPoints","totalDamagePoints","currentUnitHealthPoints","unitsKilled","remainingDamagePoints","round","excessDamage","getHowManyUnitsDied","lastTakenDamage","checkForWinner","partition","myUnits","opponentUnits","concede","startCastSpell","castSpell","actions","isAdjacentCoordinateWithActionPoints","Boolean","arrOfAdjCoordinates","i","j","filter","getAdjacentSquaresCoordinatesWithActionPoints","xDiff","abs","yDiff","LOADING_PHRASES","StyledThrobberBackground","StyledLabel","StyledTrobberContainer","StyledLoadingThrobber","img","LoadingThrobber","clockStyle","loop","rotateZ","labelStyle","reverse","config","duration","loadingPhrase","useMemo","sample","src","loadingIcon","reportWebVitals","onPerfEntry","Function","then","getCLS","getFID","getFCP","getLCP","getTTFB","userSlice","nickname","login","logout","store","configureStore","reducer","game","gameReducer","user","userReducer","App","React","lazy","ReactDOM","render","StrictMode","Suspense","fallback","getElementById"],"mappings":"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","file":"static/js/main.41abad50.chunk.js","sourcesContent":["export const NUMBERS_OF_BOARD_ROWS = 5;\nexport const NUMBERS_OF_BOARD_COLUMNS = 8;\n\nexport const ADJACENT_COORDINATES = [\n  [-1, -1],\n  [-1, 0],\n  [-1, 1],\n  [0, -1],\n  [0, 1],\n  [1, -1],\n  [1, 0],\n  [1, 1],\n];\n\nexport const FIRST_PLAYER_POSSIBLE_INITIAL_COORDINATES = [\n  { x: 0, y: 0 },\n  { x: 0, y: 1 },\n  { x: 0, y: 2 },\n  { x: 0, y: 3 },\n  { x: 0, y: 4 },\n];\n\nexport const SECOND_PLAYER_POSSIBLE_INITIAL_COORDINATES = [\n  { x: 7, y: 0 },\n  { x: 7, y: 1 },\n  { x: 7, y: 2 },\n  { x: 7, y: 3 },\n  { x: 7, y: 4 },\n];\n","import { FC, MouseEventHandler, ReactNode } from \"react\";\nimport { createPortal } from \"react-dom\";\nimport styled from \"styled-components\";\nimport { animated, useSpring } from \"react-spring\";\n\nimport alagardFont from \"../../fonts/alagard.ttf\";\n\nimport defaultCursor from \"../../pictures/cursor/defaultCursor.png\";\n\ninterface IModal {\n  className?: string;\n  children: ReactNode;\n  onOutsideClick?: () => void;\n  customBackgroundStyle?: any;\n  customModalStyle?: any;\n}\n\nconst rootNode = document.querySelector(\"#root\");\n\nconst Modal: FC<IModal> = ({\n  children,\n  className,\n  onOutsideClick,\n  customBackgroundStyle,\n  customModalStyle,\n}) => {\n  const handleOutsideClick = (e: any) => {\n    e.preventDefault();\n    e.stopPropagation();\n    if (onOutsideClick) onOutsideClick();\n  };\n\n  const handleInsideClick = (e: any) => {\n    e.preventDefault();\n    e.stopPropagation();\n  };\n\n  const modalStyles = useSpring({\n    to: [{ opacity: 1, marginTop: \"0px\" }],\n    from: { opacity: 0, marginTop: \"100px\" },\n  });\n\n  const backgroundStyles = useSpring({\n    to: [{ opacity: 1 }],\n    from: { opacity: 0 },\n  });\n\n  return rootNode\n    ? createPortal(\n        <StyledBackground\n          onClick={handleOutsideClick}\n          className={className}\n          style={\n            customBackgroundStyle ? customBackgroundStyle : backgroundStyles\n          }\n        >\n          <StyledModal\n            onClick={handleInsideClick}\n            style={customModalStyle ? customModalStyle : modalStyles}\n          >\n            {children}\n          </StyledModal>\n        </StyledBackground>,\n        rootNode\n      )\n    : null;\n};\n\nconst StyledBackground = styled(animated.div)`\n  user-select: none;\n  position: fixed;\n  top: 0;\n  background: #1e171796;\n  height: 100vh;\n  width: 100vw;\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  z-index: 10;\n\n  cursor: url(${defaultCursor}), auto;\n  @font-face {\n    font-family: \"Alagard\";\n    src: url(${alagardFont}) format(\"truetype\");\n  }\n  font-family: Alagard;\n  color: #ffe98c;\n  text-shadow: 2px 2px 0 #000;\n`;\n\nconst StyledModal = styled(animated.div)``;\n\nexport default Modal;\n","import { isEmpty, random, shuffle } from \"lodash\";\n\nimport { SquareState, Unit, UnitTemplateWithCount } from \"../../../types\";\nimport {\n  NUMBERS_OF_BOARD_ROWS,\n  NUMBERS_OF_BOARD_COLUMNS,\n  FIRST_PLAYER_POSSIBLE_INITIAL_COORDINATES,\n  SECOND_PLAYER_POSSIBLE_INITIAL_COORDINATES,\n} from \"../constants/boardConstants\";\n\n/** Setting the owners and unique indexes and directions of view */\nconst getUnitsForPlayersWithOwnerAndId = (\n  firstPlayerUnitTemplates: UnitTemplateWithCount[],\n  secondPlayerUnitTemplates: UnitTemplateWithCount[],\n  firstPlayer: string,\n  secondPlayer: string\n) => {\n  const firstPlayerUnits = firstPlayerUnitTemplates.map(\n    (UnitTemplate, index) => {\n      return {\n        ...UnitTemplate,\n        owner: firstPlayer,\n        id: index,\n        viewDirection: \"right\",\n      };\n    }\n  );\n  const offset = firstPlayerUnitTemplates.length;\n  const secondPlayerUnits = secondPlayerUnitTemplates.map(\n    (UnitTemplate, index) => {\n      return {\n        ...UnitTemplate,\n        owner: secondPlayer,\n        id: offset + index,\n        viewDirection: \"left\",\n      };\n    }\n  );\n  return { firstPlayerUnits, secondPlayerUnits };\n};\n\n/** Setting coordinates by random (TODO: set coordinates manually by players) */\nconst getUnitsWithRandomCoordinates = (\n  firstPlayerUnits: Omit<Unit, \"coordinates\" | \"isActive\">[],\n  secondPlayerUnits: Omit<Unit, \"coordinates\" | \"isActive\">[]\n) => {\n  const firstPlayerPossibleInitialCoordinates = shuffle(\n    FIRST_PLAYER_POSSIBLE_INITIAL_COORDINATES\n  );\n\n  const firstPlayerUnitsWithCoordinates = firstPlayerUnits.map((unit) => {\n    const coordinates = firstPlayerPossibleInitialCoordinates.pop();\n    if (!coordinates)\n      throw new Error(\n        \"The number of available coordinates for the first player is less than the number of its units!\"\n      );\n    return {\n      ...unit,\n      coordinates: coordinates,\n    };\n  });\n\n  const secondPlayerPossibleInitialCoordinates = shuffle(\n    SECOND_PLAYER_POSSIBLE_INITIAL_COORDINATES\n  );\n\n  const secondPlayerUnitsWithCoordinates = secondPlayerUnits.map((unit) => {\n    const coordinates = secondPlayerPossibleInitialCoordinates.pop();\n    if (!coordinates)\n      throw new Error(\n        \"The number of available coordinates for the second player is less than the number of its units!\"\n      );\n    return {\n      ...unit,\n      coordinates: coordinates,\n    };\n  });\n\n  return { firstPlayerUnitsWithCoordinates, secondPlayerUnitsWithCoordinates };\n};\n\n/** Sorting units by actionPoints and adding isActive flag */\nconst getUnitsArrayFromTwoPlayersArraysWithCoordiates = (\n  firstPlayerUnitsWithCoordinates: Omit<Unit, \"isActive\">[],\n  secondPlayerUnitsWithCoordinates: Omit<Unit, \"isActive\">[]\n) => {\n  return firstPlayerUnitsWithCoordinates\n    .concat(secondPlayerUnitsWithCoordinates)\n    .sort(\n      (firstEl, secondEl) =>\n        firstEl.actionPoints.max - secondEl.actionPoints.max\n    )\n    .map((unit, index) =>\n      index === 0 ? { ...unit, isActive: true } : { ...unit, isActive: false }\n    );\n};\n\n/** Setting initial units on board state */\nconst getInitialBoardState = (unitsArray: Unit[]) => {\n  let board = [\n    [{}, {}, {}, {}, {}, {}, {}, {}],\n    [{}, {}, {}, {}, {}, {}, {}, {}],\n    [{}, {}, {}, {}, {}, {}, {}, {}],\n    [{}, {}, {}, {}, {}, {}, {}, {}],\n    [{}, {}, {}, {}, {}, {}, {}, {}],\n  ];\n  unitsArray.forEach(({ coordinates: { x, y }, unitType, id }) => {\n    board[y][x] = { type: \"unit\", unitType, id };\n  });\n\n  // Add random obstacles to board\n  board = board.map((row) =>\n    row.map((square) => {\n      square =\n        !random(0, 15) && isEmpty(square)\n          ? { type: \"obstacle\", id: 1, obstacleType: \"STONES\" }\n          : square;\n      return square;\n    })\n  );\n  return board;\n};\n\n/** Returns initial board and units synchronized state for game */\nexport const getInitialBoardAndUnitsState = (\n  firstPlayerUnitTemplates: Array<UnitTemplateWithCount>,\n  secondPlayerUnitTemplates: Array<UnitTemplateWithCount>,\n  firstPlayer: string,\n  secondPlayer: string\n) => {\n  // Setting the owners and unique indexes\n  const { firstPlayerUnits, secondPlayerUnits } =\n    getUnitsForPlayersWithOwnerAndId(\n      firstPlayerUnitTemplates,\n      secondPlayerUnitTemplates,\n      firstPlayer,\n      secondPlayer\n    );\n\n  // Setting coordinates by random (TODO: set coordinates manually by players)\n  const { firstPlayerUnitsWithCoordinates, secondPlayerUnitsWithCoordinates } =\n    getUnitsWithRandomCoordinates(firstPlayerUnits, secondPlayerUnits);\n\n  // Sorting units by actionPoints and adding isActive flag\n  const unitsArray = getUnitsArrayFromTwoPlayersArraysWithCoordiates(\n    firstPlayerUnitsWithCoordinates,\n    secondPlayerUnitsWithCoordinates\n  );\n\n  return {\n    units: unitsArray,\n    board: getInitialBoardState(unitsArray),\n  };\n};\n","import { random } from \"lodash\";\nimport { SquareState, Unit, UnitType } from \"../../../types\";\n\n/** Returns boolean whether unit is dead or not */\nexport const isUnitDead = (unit: Unit) => {\n  return unit.count <= 0;\n};\n\n/** Returns squareState object to show on board after unit died */\nexport const getDeadBody: (id: number, unitType: UnitType) => SquareState = (\n  id: number,\n  unitType: UnitType\n) => {\n  return { type: \"deadBody\", id: id, deadBodyType: `DEAD_BODY_${unitType}` };\n};\n\n/** Returns an object with units killed number and current unit health */\nexport const getHowManyUnitsDied = (attacker: Unit, defender: Unit) => {\n  const attackPoints = random(\n    attacker.attack.min * attacker.count,\n    attacker.attack.max * attacker.count\n  );\n\n  const defendPoints = defender.defense * defender.count;\n\n  const totalDamagePoints =\n    attackPoints - defendPoints > Math.ceil(attackPoints * 0.3)\n      ? attackPoints - defendPoints\n      : Math.ceil(attackPoints * 0.3);\n\n  const currentUnitHealthPoints =\n    defender.healthPoints.current - totalDamagePoints;\n\n  if (currentUnitHealthPoints > 0)\n    return { totalDamagePoints, unitsKilled: 0, currentUnitHealthPoints };\n\n  const remainingDamagePoints =\n    totalDamagePoints - defender.healthPoints.current;\n\n  const unitsKilled =\n    Math.round(remainingDamagePoints / defender.healthPoints.max) + 1;\n\n  const excessDamage = Math.round(\n    remainingDamagePoints % defender.healthPoints.max\n  );\n\n  return {\n    unitsKilled,\n    currentUnitHealthPoints: defender.healthPoints.max - excessDamage,\n    totalDamagePoints,\n  };\n};\n","import { BoardAndUnitsState, Unit } from \"../../../../types\";\nimport { getDeadBody } from \"../../../Board/utils/attackUtils\";\n\nconst MAGIC_ARROW_DMG = 50;\n\n// TODO: fix like attack reducer in board slice\nconst applyDirectDamageToUnits = (\n  units: Unit[],\n  targetX: number,\n  targetY: number\n) => {\n  return units.map((unit) => {\n    if (unit.coordinates.x === targetX && unit.coordinates.y === targetY) {\n      const totalDamage = MAGIC_ARROW_DMG;\n      const totalHpBeforeDmg =\n        unit.healthPoints.max * (unit.count - 1) + unit.healthPoints.current;\n      const totalHpAfterDmg = totalHpBeforeDmg - totalDamage;\n      const unitCountAfterDmg = Math.ceil(\n        totalHpAfterDmg / unit.healthPoints.max\n      );\n      const currentHealthAfterDmg = totalHpAfterDmg % unit.healthPoints.max;\n\n      return {\n        ...unit,\n        healthPoints: {\n          max: unit.healthPoints.max,\n          current: currentHealthAfterDmg,\n        },\n        count: unitCountAfterDmg,\n      };\n    }\n    return unit;\n  });\n};\n\nexport const applyMagicArrowEffect = (\n  BoardAndUnitsState: BoardAndUnitsState\n) => {\n  const {\n    board,\n    deadUnits,\n    units,\n    target: { x: targetX, y: targetY },\n  } = BoardAndUnitsState;\n  const newUnits = applyDirectDamageToUnits(units, targetX, targetY);\n  newUnits.forEach((unit) => {\n    if (unit.count <= 0) {\n      newUnits.splice(newUnits.indexOf(unit), 1);\n      deadUnits?.push(unit);\n      board[targetY][targetX] = getDeadBody(unit.id, unit.unitType);\n    }\n  });\n  const newLastAction = `Magic arrow was casted in square ${targetX} ${targetY}`;\n  return { board, units: newUnits, deadUnits, lastAction: newLastAction };\n};\n","import { ArtifactName, BoardState } from \"../../pages/gamePage/types\";\nimport { bootsOfSpeedReducer } from \"./bootsOfSpeed\";\nimport { centaursAxeReducer } from \"./centaursAxe\";\nimport { helmOfAlabasterUnicornReducer } from \"./helmOfAlabasterUnicorn\";\nimport { ringOfVitalityReducer } from \"./ringOfVitality\";\nimport { shieldOfDwarwenLordsReducer } from \"./shieldOfDwarwenLords\";\n\nexport const applyArtifactEffect = (\n  board: BoardState,\n  artifactName: ArtifactName,\n  owner: string\n) => {\n  switch (artifactName) {\n    case \"HELM_OF_ALABASTER_UNICORN\":\n      return helmOfAlabasterUnicornReducer(board, owner);\n    case \"CENTAURS_AXE\":\n      return centaursAxeReducer(board, owner);\n    case \"RING_OF_VITALITY\":\n      return ringOfVitalityReducer(board, owner);\n    case \"SHIELD_OF_DWARWEN_LORDS\":\n      return shieldOfDwarwenLordsReducer(board, owner);\n    case \"BOOTS_OF_SPEED\":\n      return bootsOfSpeedReducer(board, owner);\n  }\n};\n","import { BoardState } from \"../../pages/gamePage/types\";\n\nexport const helmOfAlabasterUnicornReducer = (\n  board: BoardState,\n  owner: string\n) => {\n  board.myName === owner\n    ? (board.spellPoints.max = board.spellPoints.current =\n        board.spellPoints.max + 2)\n    : (board.opponentSpellPoints.max = board.opponentSpellPoints.current =\n        board.opponentSpellPoints.max + 2);\n  return board;\n};\n","import { BoardState } from \"../../pages/gamePage/types\";\n\nexport const centaursAxeReducer = (board: BoardState, owner: string) => {\n  board.units = board.units.map((unit) => {\n    if (owner === unit.owner) {\n      return {\n        ...unit,\n        attack: { max: unit.attack.max + 1, min: unit.attack.min },\n      };\n    }\n    return unit;\n  });\n  return board;\n};\n","import { BoardState } from \"../../pages/gamePage/types\";\n\nexport const ringOfVitalityReducer = (board: BoardState, owner: string) => {\n  board.units = board.units.map((unit) => {\n    if (owner === unit.owner) {\n      return {\n        ...unit,\n        healthPoints: {\n          max: unit.healthPoints.max + 1,\n          current: unit.healthPoints.max + 1,\n        },\n      };\n    }\n    return unit;\n  });\n  return board;\n};\n","import { BoardState } from \"../../pages/gamePage/types\";\n\nexport const shieldOfDwarwenLordsReducer = (\n  board: BoardState,\n  owner: string\n) => {\n  board.units = board.units.map((unit) => {\n    if (owner === unit.owner) {\n      return {\n        ...unit,\n        defense: unit.defense + 1,\n      };\n    }\n    return unit;\n  });\n  return board;\n};\n","import { BoardState } from \"../../pages/gamePage/types\";\n\nexport const bootsOfSpeedReducer = (board: BoardState, owner: string) => {\n  board.units = board.units.map((unit) => {\n    if (owner === unit.owner) {\n      return {\n        ...unit,\n        actionPoints: {\n          max: unit.actionPoints.max + 1,\n          current: unit.actionPoints.max + 1,\n        },\n      };\n    }\n    return unit;\n  });\n  return board;\n};\n","import { createSlice, PayloadAction } from \"@reduxjs/toolkit\";\nimport { partition } from \"lodash\";\n\nimport { getHowManyActionPointsToMove } from \"./components/Board/utils/movingUtils\";\nimport { getInitialBoardAndUnitsState } from \"./components/Board/utils/initializeUtils\";\n\nimport {\n  Artifact,\n  BackgroundType,\n  BoardState,\n  SpellName,\n  Unit,\n  UnitTemplateWithCount,\n} from \"./types\";\nimport {\n  getDeadBody,\n  isUnitDead,\n  getHowManyUnitsDied,\n} from \"./components/Board/utils/attackUtils\";\nimport { applySpellEffect } from \"./components/Spellbook/spellEffects\";\nimport { applyArtifactEffect } from \"../../store/artifactReducers\";\n\nconst initialState: BoardState = {\n  board: [],\n  units: [],\n  deadUnits: [],\n  lastAction: \"The battle has began!\",\n  myName: \"player 1\", // TODO: Take it from user controller\n  opponentName: \"player 2\",\n  winner: \"\",\n  isOnline: false,\n  spellStack: {\n    isCasting: false,\n    spellName: undefined,\n    cost: 0,\n    effectSrc: \"\",\n  },\n  turn: 0,\n  spellPoints: { isTired: false, max: 10, current: 10 },\n  opponentSpellPoints: { isTired: false, max: 10, current: 10 },\n  backgroundSrc: \"BEACH\",\n  myArtifacts: [],\n  opponentArtifacts: [],\n};\n\nexport const gameSlice = createSlice({\n  name: \"game\",\n  initialState,\n  reducers: {\n    initBoard: (\n      state,\n      action: PayloadAction<{\n        firstPlayerUnitTemplates: Array<UnitTemplateWithCount>;\n        secondPlayerUnitTemplates: Array<UnitTemplateWithCount>;\n        userName: string;\n        opponentName: string;\n        backgroundSrc: BackgroundType;\n        firstPlayerArtifactArr: Artifact[];\n        secondPlayerArtifactArr: Artifact[];\n      }>\n    ) => {\n      const {\n        firstPlayerUnitTemplates,\n        secondPlayerUnitTemplates,\n        opponentName,\n        userName,\n        backgroundSrc,\n        firstPlayerArtifactArr,\n        secondPlayerArtifactArr,\n      } = action.payload;\n      state.opponentName = opponentName;\n      const { units, board } = getInitialBoardAndUnitsState(\n        firstPlayerUnitTemplates,\n        secondPlayerUnitTemplates,\n        userName,\n        opponentName\n      );\n      state.spellStack = {\n        isCasting: false,\n        spellName: undefined,\n        cost: 0,\n        effectSrc: \"\",\n      };\n      state.opponentSpellPoints = {\n        isTired: false,\n        max: 10,\n        current: 10,\n      };\n      state.spellPoints = {\n        isTired: false,\n        max: 10,\n        current: 10,\n      };\n      state.units = units;\n      state.board = board;\n\n      state.winner = \"\";\n      state.lastAction = \"The battle has began!\";\n      state.deadUnits = [];\n      state.turn = 0;\n      state.backgroundSrc = backgroundSrc;\n      state.myArtifacts = firstPlayerArtifactArr;\n      state.opponentArtifacts = secondPlayerArtifactArr;\n      firstPlayerArtifactArr.forEach((artifact) => {\n        state = applyArtifactEffect(state, artifact.name, userName);\n      });\n      secondPlayerArtifactArr.forEach((artifact) => {\n        state = applyArtifactEffect(state, artifact.name, opponentName);\n      });\n      state.activeUnit = state.units[0];\n      [\n        state.myName,\n        state.spellPoints,\n        state.myArtifacts,\n        state.opponentName,\n        state.opponentSpellPoints,\n        state.opponentArtifacts,\n      ] =\n        state.activeUnit.owner === userName\n          ? [\n              userName,\n              state.spellPoints,\n              state.myArtifacts,\n              opponentName,\n              state.opponentSpellPoints,\n              state.opponentArtifacts,\n            ]\n          : [\n              opponentName,\n              state.opponentSpellPoints,\n              state.opponentArtifacts,\n              userName,\n              state.spellPoints,\n              state.myArtifacts,\n            ];\n    },\n\n    moveToSquare: (\n      state,\n      action: PayloadAction<{\n        prevX: number;\n        prevY: number;\n        nextX: number;\n        nextY: number;\n        id: number;\n      }>\n    ) => {\n      if (!state.activeUnit) throw Error(\"No active unit found!\"); // TODO: Move this checking logic somewhere\n      const { prevX, prevY, nextX, nextY, id } = action.payload;\n      const { units } = state;\n      const unitIndex = units.findIndex(({ id: currID }) => currID === id);\n      const movingUnit = units[unitIndex];\n      movingUnit.coordinates = state.activeUnit.coordinates = {\n        x: nextX,\n        y: nextY,\n      };\n      state.activeUnit.actionPoints.current -= getHowManyActionPointsToMove(\n        prevX,\n        prevY,\n        nextX,\n        nextY\n      );\n      state.board[nextY][nextX].type = \"unit\";\n      state.board[nextY][nextX].unitType = state.board[prevY][prevX].unitType;\n      state.board[prevY][prevX] = {};\n      state.board[nextY][nextX].id = id;\n      state.lastAction = `${movingUnit.unitType} is moving to coordinate ${nextX} ${nextY}`;\n    },\n\n    nextTurn: (state, action: PayloadAction<{ activeUnit: Unit }>) => {\n      const { id: prevActiveUserID } = action.payload.activeUnit;\n      const { units } = state;\n      const prevUnitIndex = units.findIndex(\n        ({ id }) => id === prevActiveUserID\n      );\n      const nextActiveUnitArrayPosition = (prevUnitIndex + 1) % units.length;\n      state.lastAction = \"\";\n      if (nextActiveUnitArrayPosition < prevUnitIndex) {\n        ++state.turn;\n        state.lastAction += `Turn ${state.turn} has come! `;\n        state.spellPoints.isTired = state.opponentSpellPoints.isTired = false;\n      }\n      const nextActiveUnit = units[nextActiveUnitArrayPosition];\n      state.activeUnit = nextActiveUnit;\n      if (!state.isOnline && nextActiveUnit.owner !== state.myName) {\n        [state.opponentName, state.myName] = [state.myName, state.opponentName];\n        [state.opponentSpellPoints, state.spellPoints] = [\n          state.spellPoints,\n          state.opponentSpellPoints,\n        ];\n        [state.myArtifacts, state.opponentArtifacts] = [\n          state.opponentArtifacts,\n          state.myArtifacts,\n        ];\n        state.lastAction += `The turn goes to ${state.opponentName}`;\n      }\n    },\n\n    attack: (\n      state,\n      action: PayloadAction<{ attacker: Unit; defender: Unit }>\n    ) => {\n      if (!state.activeUnit) throw Error(\"No active unit found!\"); // TODO: Move this checking logic somewhere\n      const { attacker, defender } = action.payload;\n      const { id: attackerID } = attacker;\n      const { id: defenderID } = defender;\n      const { units } = state;\n      const attackerUnit = units.find(({ id }) => id === attackerID);\n      const defenderUnit = units.find(({ id }) => id === defenderID);\n      if (attackerUnit && defenderUnit) {\n        const { unitsKilled, currentUnitHealthPoints, totalDamagePoints } =\n          getHowManyUnitsDied(attacker, defender);\n        defenderUnit.healthPoints.lastTakenDamage = totalDamagePoints;\n        defenderUnit.healthPoints.current = currentUnitHealthPoints;\n        defenderUnit.count -= unitsKilled;\n        state.lastAction = `${defender.unitType} of ${defender.owner} was attacked by ${attacker.unitType} of ${attacker.owner}! ${unitsKilled} units was killed`;\n        if (isUnitDead(defenderUnit)) {\n          units.splice(units.indexOf(defenderUnit), 1);\n          state.deadUnits?.push(defenderUnit);\n          // clear the board\n          const {\n            coordinates: { x, y },\n          } = defender;\n          state.board[y][x] = getDeadBody(defenderID, defender.unitType);\n          state.lastAction = `${defender.unitType} of ${defender.owner} was destroyed!`;\n        }\n        state.activeUnit.actionPoints.current -= 1;\n      }\n    },\n\n    checkForWinner: (\n      state,\n      action: PayloadAction<{ userName: string; opponentName: string }>\n    ) => {\n      const { userName, opponentName } = action.payload;\n      const units = partition(state.units, ({ owner }) => {\n        return owner === userName;\n      });\n      const [myUnits, opponentUnits] = units;\n      if (state.activeUnit) {\n        if (myUnits.length === 0) state.winner = opponentName;\n        if (opponentUnits.length === 0) state.winner = userName;\n      }\n    },\n\n    concede: (state) => {\n      state.winner = state.opponentName;\n    },\n\n    startCastSpell: (\n      state,\n      action: PayloadAction<{\n        spellName: SpellName;\n        cost: number;\n        effectSrc: string;\n      }>\n    ) => {\n      const { spellName, cost, effectSrc } = action.payload;\n      state.spellStack.effectSrc = effectSrc;\n      state.spellStack.cost = cost;\n      state.spellStack.isCasting = true;\n      state.spellStack.spellName = spellName;\n    },\n\n    castSpell: (state, action: PayloadAction<{ x: number; y: number }>) => {\n      const { x, y } = action.payload;\n      if (!state.spellStack.spellName) return state;\n      const { board, units, deadUnits, lastAction } = applySpellEffect({\n        spellName: state.spellStack.spellName,\n        board: state.board,\n        units: state.units,\n        deadUnits: state.deadUnits,\n        lastAction: state.lastAction,\n        target: { x, y },\n      });\n      state.spellPoints.current -= state.spellStack.cost;\n      state.spellStack.cost = 0;\n      state.spellPoints.isTired = true;\n      state.spellStack.isCasting = false;\n      state.spellStack.spellName = undefined;\n      state.board = board;\n      state.units = units;\n      state.deadUnits = deadUnits;\n      state.lastAction = lastAction;\n    },\n  },\n});\n\nexport const {\n  initBoard,\n  moveToSquare,\n  nextTurn,\n  attack,\n  checkForWinner,\n  concede,\n  startCastSpell,\n  castSpell,\n} = gameSlice.actions;\n\nexport default gameSlice.reducer;\n","import { BoardAndUnitsState } from \"../../../types\";\nimport { applyMagicArrowEffect } from \"./MagicArrow/reducer\";\n\nexport const applySpellEffect = (BoardAndUnitsState: BoardAndUnitsState) => {\n  const { spellName } = BoardAndUnitsState;\n  switch (spellName) {\n    case \"Magic Arrow\":\n      return applyMagicArrowEffect(BoardAndUnitsState);\n    default:\n      return BoardAndUnitsState;\n  }\n};\n","export default \"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAoAAAASCAMAAABVab95AAAAAXNSR0IArs4c6QAAAARnQU1BAACxjwv8YQUAAABOUExURQAAAMenV//1yMmuWrGUQdW6bv761Zd9KdS1ZP/vrQEAApN2I8atUoZqG7OgT3taGAABAJ2DLPbejwEAAIpwH//rs7mjVIxzIa2USgAAAFC2u5EAAAAadFJOU/////////////////////////////////8AFCIA2gAAAAlwSFlzAAAOwwAADsMBx2+oZAAAAF5JREFUGFc1zUcWwCAIANFJMaY307z/RQOorv4bUYCYD1TFUBdDUwyt65LB925oRuOknqXD4lcnXyLc9uMMaXaPrF7f6TKu22hXT6vF+Oq0MfJJzrwkJ1ouXM6QGQn8E50LS75LAwwAAAAASUVORK5CYII=\"","export default __webpack_public_path__ + \"static/media/alagard.685ec71b.ttf\";","import {\n  NUMBERS_OF_BOARD_ROWS,\n  NUMBERS_OF_BOARD_COLUMNS,\n  ADJACENT_COORDINATES,\n} from \"../constants/boardConstants\";\n\n/** Get adjacent squares coordinates */\nexport const getAdjacentSquaresCoordinates = (x: number, y: number) => {\n  return ADJACENT_COORDINATES.map(([adjX, adjY]) =>\n    0 <= x + adjX &&\n    x + adjX < NUMBERS_OF_BOARD_COLUMNS &&\n    0 <= y + adjY &&\n    y + adjY < NUMBERS_OF_BOARD_ROWS\n      ? [x + adjX, y + adjY]\n      : []\n  ).filter((el) => el.length > 0);\n};\n\n/** Get adjacent squares coordinates considering available action points*/\nexport const getAdjacentSquaresCoordinatesWithActionPoints = (\n  x: number,\n  y: number,\n  actionPoints: number\n) => {\n  const arrOfAdjCoordinates: Array<Array<number>> = [];\n  for (let i = -actionPoints; i <= actionPoints; ++i)\n    for (let j = -actionPoints; j <= actionPoints; ++j) {\n      arrOfAdjCoordinates.push([x + i, y + j]);\n    }\n  return arrOfAdjCoordinates.filter(\n    (coordinates) =>\n      coordinates[0] < NUMBERS_OF_BOARD_COLUMNS &&\n      coordinates[1] < NUMBERS_OF_BOARD_ROWS\n  );\n};\n\n/** Returns true if its available to move from one coordinate to another */\nexport const isAdjacentCoordinateWithActionPoints = (\n  prevX: number,\n  prevY: number,\n  nextX: number,\n  nextY: number,\n  actionPoints: number\n) => {\n  return Boolean(\n    getAdjacentSquaresCoordinatesWithActionPoints(\n      prevX,\n      prevY,\n      actionPoints\n    ).find(([x, y]) => nextX === x && nextY === y)\n  );\n};\n\n/** Returns number of action points needed to get from one coordinate to another */\nexport const getHowManyActionPointsToMove = (\n  prevX: number,\n  prevY: number,\n  nextX: number,\n  nextY: number\n) => {\n  const xDiff = Math.abs(prevX - nextX);\n  const yDiff = Math.abs(prevY - nextY);\n  return Math.max(xDiff, yDiff);\n};\n","export default \"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAYCAMAAADNlS1EAAAAAXNSR0IArs4c6QAAAARnQU1BAACxjwv8YQUAAADAUExURQIBAVA+AJd9KaWELaiMOcatUta6Y+LKdd3EdN7Eac61WrmjVLGZRUw5App7I3JYBFhBAGtTAMmuWuvPe//86v799//1yP/rsz8wADgqAIZqG4xzGf7jj//33v7247meSgEAAgAAAGJLAHthDmBIAzIkAQABAIpwH4BkCpN2I9S0XQQAAHJXABgAACoFAPTWgj0rDjEuB3tjAEAXAv7nogQBAaWUM3lQAQ8MBGVFGL2jS3NYCKyUO+fPgP761QAAAMvnF3oAAABAdFJOU////////////////////////////////////////////////////////////////////////////////////wDCe7FEAAAACXBIWXMAAA7DAAAOwwHHb6hkAAABZklEQVQoUz3Rf3OcIBAGYEW8XwFdYi5B1Jwg0dqYqzbtJWmv3e//rbqYmfIPwzPsu8sQIUYxSxLG0812tz/cCElCluWg2G1xd7zfpQ+Z0BhFpakY4yLd1c3x7vjY1CcZYauNlVkMrjOV2fqnU0zlvRyszvIYvnT7cePsVyC08WDlqABc3piDe96uCKyPKykTLpop9S9FwNYTsphNk2jygzs/hEwLaU+3laq+Damal1oSRn672KDm+42a8fVHwNbXr/izhyS/vL0jPjVr+UexILak3iLi3KzdVTHTwcaJow3nR0fYq18BNeOXoJ9ofwtCbWQKHAiLT7zOaLvSsV1Oer4N2KrreemWZTGQxgnY0/qiD9HrYVk6qO4poOVruT9ZPZYdgNoQWu4DgtA6Yc47lzEGEDAqhRBXPiaXdPOnaf7WezFTZnn1WutpUt5LKVUXGmFfJpzTf7JsHIwxNCshtv+XtbZFxH/bJjlB8LSp8wAAAABJRU5ErkJggg==\"","export const LOADING_PHRASES = [\n  \"Loading\",\n  \"Preparing for battle\",\n  \"Getting ready to fight\",\n  \"Sharpening swords\",\n  \"Rearranging stones on the board\",\n  \"Polishing the shields\",\n];\n","import { useSpring } from \"@react-spring/core\";\nimport { animated } from \"@react-spring/web\";\nimport { FC, useMemo } from \"react\";\nimport styled from \"styled-components\";\nimport Modal from \"../Modal\";\nimport loadingIcon from \"../../pictures/clock.png\";\nimport { getRandomLoadingPhrase } from \"./utils\";\n\ninterface ILoadingThrobber {\n  style: any;\n}\n\nconst LoadingThrobber: FC<ILoadingThrobber> = ({ style }) => {\n  const clockStyle = useSpring({\n    loop: true,\n    from: { rotateZ: 0 },\n    to: { rotateZ: 180 },\n  });\n\n  const labelStyle = useSpring({\n    loop: { reverse: true },\n    config: { duration: 1000 },\n    from: { opacity: 0 },\n    to: { opacity: 1 },\n  });\n\n  const loadingPhrase = useMemo(() => getRandomLoadingPhrase(), []);\n\n  return (\n    <StyledThrobberBackground customBackgroundStyle={style}>\n      <StyledTrobberContainer>\n        <StyledLoadingThrobber src={loadingIcon} style={clockStyle} />\n        <StyledLabel style={labelStyle}>{loadingPhrase}</StyledLabel>\n      </StyledTrobberContainer>\n    </StyledThrobberBackground>\n  );\n};\n\nconst StyledThrobberBackground = styled(Modal)``;\n\nconst StyledLabel = styled(animated.div)`\n  font-size: 24px;\n  margin-top: 10px;\n`;\n\nconst StyledTrobberContainer = styled.div`\n  display: flex;\n  align-items: center;\n  flex-direction: column;\n`;\n\nconst StyledLoadingThrobber = styled(animated.img)`\n  width: 40px;\n`;\n\nexport default LoadingThrobber;\n","import { sample } from \"lodash\";\nimport { LOADING_PHRASES } from \"./constants\";\n\nexport const getRandomLoadingPhrase = () => {\n  return sample(LOADING_PHRASES);\n};\n","import { ReportHandler } from 'web-vitals';\n\nconst reportWebVitals = (onPerfEntry?: ReportHandler) => {\n  if (onPerfEntry && onPerfEntry instanceof Function) {\n    import('web-vitals').then(({ getCLS, getFID, getFCP, getLCP, getTTFB }) => {\n      getCLS(onPerfEntry);\n      getFID(onPerfEntry);\n      getFCP(onPerfEntry);\n      getLCP(onPerfEntry);\n      getTTFB(onPerfEntry);\n    });\n  }\n};\n\nexport default reportWebVitals;\n","import { createSlice, PayloadAction } from \"@reduxjs/toolkit\";\n\nconst initialState = {\n  nickname: \"admin\",\n};\n\nexport const userSlice = createSlice({\n  name: \"user\",\n  initialState,\n  reducers: {\n    login: (\n      state,\n      action: PayloadAction<{\n        nickname: string;\n      }>\n    ) => {\n      const { nickname } = action.payload;\n      state.nickname = nickname;\n    },\n\n    logout: (state) => {\n      state.nickname = \"\";\n    },\n  },\n});\n\nexport const { login, logout } = userSlice.actions;\n\nexport default userSlice.reducer;\n","import { configureStore } from \"@reduxjs/toolkit\";\nimport gameReducer from \"../pages/gamePage/boardSlice\";\nimport userReducer from \"./userSlice\";\n\nexport const store = configureStore({\n  reducer: {\n    game: gameReducer,\n    user: userReducer,\n  },\n});\n\nexport type RootState = ReturnType<typeof store.getState>;\nexport type AppDispatch = typeof store.dispatch;\n","import React from \"react\";\nimport ReactDOM from \"react-dom\";\nimport reportWebVitals from \"./reportWebVitals\";\nimport { store } from \"./store/store\";\nimport { Provider } from \"react-redux\";\n\nimport LoadingThrobber from \"./components/LoadingThrobber\";\nconst App = React.lazy(() => import(\"./App\"));\n\nReactDOM.render(\n  <Provider store={store}>\n    <React.StrictMode>\n      <React.Suspense fallback={LoadingThrobber}>\n        <App />\n      </React.Suspense>\n    </React.StrictMode>\n  </Provider>,\n  document.getElementById(\"root\")\n);\n\nreportWebVitals();\n"],"sourceRoot":""}